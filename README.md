# Deploying the Game of Go with AWS Lambda

Our project hosts an interactive webpage use React and TypeScipt that dynamically receives actions generated by AWS Lambda and renders a game in real-time. The backend logic, including game state management and decision-making, is handled by a Lambda function that runs our code packaged within a Docker container image.

Check out these two GitHub repositories to explore our project:
- [Frontend Web Application](https://github.com/yuanyuan-git-tech/wuziqi-frontend)
- [Backend AWS Lambda Function Code](https://github.com/Mason130/cs5501-project)


## Deployment Workflow
We utilize Docker and Amazon Elastic Container Registry (Amazon ECR) to manage and deploy our containerized application. Follow the steps below to deploy your application to AWS Lambda using a Docker container image.

### Prerequisites
- Ensure you have the latest versions of the AWS CLI and Docker installed on your system.
- Update your AWS credentials file (~/.aws/credentials) with the provided AWS key and ID.

### Documentation References
- [Deploying AWS Lambda functions with container images](https://docs.aws.amazon.com/lambda/latest/dg/lambda-deploy-functions.html#deploying-containers)
- [Creating Lambda functions defined as container images](https://docs.aws.amazon.com/lambda/latest/dg/python-image.html#python-image-instructions)

###  Getting Started

#### Step 1: Prepare Your Docker Image Locally
Make sure that you have the latest version of the AWS CLI and Docker installed. 
Copy and paste providede key and id into ~/.aws/credentials.

Step 1: Prepare Your Docker Image locally
First, build your Docker image locally by running:
```bash
docker build --platform linux/arm64 -t docker-image:test .
```
Then, run your Docker image to test it locally:
```bash
docker run --platform linux/arm64 -p 9000:8080 docker-image:test
```
To test the local deployment of your Docker container, use:
```bash
curl "http://localhost:9000/2015-03-31/functions/function/invocations" -d '{}'
```

#### Step 2: Create an ECR Repository and push the Docker Image to ECR
- Open the Amazon ECR Console: Go to the Amazon ECR console in your AWS account.
- Create Repository: Click "Create repository" and follow the instructions by clicking the "View push commands" buttom.

#### Step 3: Create a Lambda Function with the Container Image
- Open the Lambda Console: Go to the AWS Lambda console and click on "Create function."
- Choose "Container image": Select the "Container image" option for your Lambda function's source.
- Configure the Function: Fill in the function name and choose the container image you uploaded to ECR. You'll need to select the image URI by clicking on "Browse images," choosing your repository, and then selecting the image.
- Define Execution Role: Ensure the Lambda function has an execution role with appropriate permissions. This role needs at least basic execution permissions for Lambda, and any additional permissions your function requires to interact with AWS services.
- Create Function: Click "Create function" to create your Lambda function.

#### Step 4: Test Your Lambda Function
With your Lambda function created, you can now invoke it to test the integration and functionality of your application.
